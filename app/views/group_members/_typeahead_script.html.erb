<% content_for :scripts do %>
  <script type="application/javascript">
    $(document).ready(function() {
      list_data = $("#list_user_hidden").val();

      var cities = new Bloodhound({
        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('text'),
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        local: list_data,
        identify: function(obj) {
          return obj.Value;
        }
      });

      cities.initialize();

      var elt = $('#input-members');
      elt.tagsinput({
        itemValue: 'value',
        itemText: 'text',
        typeaheadjs: {
          name: 'cities',
          displayKey: 'text',
          source: cities.ttAdapter()
        }
      });
    });
  </script> 
<% end %>
